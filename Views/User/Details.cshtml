@model Cor.Apt.Entities.Patient
@{
    var Anamnesis = (Cor.Apt.Entities.Anamnesis)ViewBag.Anamnesis;
    var age = (int) ((DateTime.Now - Model.BirthDate).TotalDays/365.242199);
}
<script>
    var patientId = @Model.PatientId
</script>
<style type="text/css" class="cssStyles">
    .detailtable td {
        font-size: 13px;
        padding: 4px;
        max-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
	font-weight: normal;
    }
</style>

<div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('/img/curved-images/curved-8.jpg'); background-position-y: 50%;">
    <span class="mask bg-gradient-primary opacity-6"></span>
</div>
<div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
    <div class="row gx-4">
        <div class="col-auto">
            <div class="avatar avatar-xl position-relative">
                <img src="/img/Blank-profile.png" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
            </div>
        </div>
        <div class="col-auto my-auto text-light">
            <div class="h-100">
                <h5 class="mb-1">
                    @Model.FullName - @Model.IdentificationNumber
                </h5>
                <p class="mb-0 font-weight-bold text-sm text-primary">
                    @Model.Gender - @Model.BirthDate.ToString("d") - Yaş @age
                </p>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid px-2 py-4">
    <div class="row">
        <div class="col-12">
            <div class="card h-100">
                @* <div class="card-header pb-0 p-3">
                    <div class="row">
                        <div class="col-md-8 d-flex align-items-center">
                            <h6 class="mb-0">Diğer Bilgiler</h6>
                        </div>
                        <div class="col-md-4 text-end">
                            <a href="javascript:;">
                                <i class="fas fa-edit text-secondary text-sm" data-bs-toggle="modal" data-bs-placement="top" title="Düzenle" data-bs-target="#anamnesisModal"></i>
                            </a>
                        </div>
                    </div>
                </div> *@
                <div class="card-body p-3">
                    <div class="accordion-2">
                        <div class="row">
                            <div class="col-md-12 mx-auto">
                                <div class="accordion">
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingZero">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#zero" aria-expanded="false" aria-controls="zero">
                                                İşlem Kaydı
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="zero" class="accordion-collapse collapse p-3" aria-labelledby="headingZero">
                                            <ejs-grid id="GridPatientRecord" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                    <e-data-manager adaptor="UrlAdaptor" url="/PatientRecord/Get?pid=@Model.PatientId" insertUrl="/PatientRecord/Insert?pid=@Model.PatientId" updateUrl="/PatientRecord/Update" removeUrl="/PatientRecord/Remove"></e-data-manager>
                                                    <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true"></e-grid-editSettings>
                                                    <e-grid-columns>
                                                        <e-grid-column field="PatientRecordId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                        <e-grid-column field="RecordDate" headerText="Kayıt Tarihi" format='yMd' editType="datepickeredit" width="100px"></e-grid-column>
                                                        <e-grid-column field="Description" headerText="Açıklama" width="80px"></e-grid-column>
                                                        <e-grid-column field="UserId" headerText="Kayıt Yapan" foreignKeyValue="FullName" foreignKeyField="UserId" dataSource="ViewBag.Users" width="80px"></e-grid-column>
                                                    </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingOne">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#one" aria-expanded="false" aria-controls="one">
                                                Hasta Bilgileri
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="one" class="accordion-collapse collapse p-3" aria-labelledby="headingOne">
                                            <ul class="list-group text-dark">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">Sigorta:</strong> &nbsp; @Model.SocialSecurity.SocialSecurityName</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">İndirim:</strong> &nbsp; @Model.DiscountType.DiscountTypeName</li>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">Eposta:</strong> &nbsp; @Model.Email</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">Telefon:</strong> &nbsp; @Model.Phone</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">İkinci Telefon:</strong> &nbsp; @Model.SecondPhone</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">Üçüncü Telefon:</strong> &nbsp; @Model.ThirdPhone</li>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-muted">Adres:</strong> &nbsp; @Model.Address</li>
                                                    </div>
                                                </div>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingTwo">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#two" aria-expanded="false" aria-controls="two">
                                                Anamnez
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="two" class="accordion-collapse collapse p-3" aria-labelledby="headingTwo">
                                            <ul class="list-group text-dark">
                                                <a href="javascript:;" class="mb-3 text-primary">
                                                    <i class="fas fa-edit text-secondary text-sm" data-bs-toggle="modal" data-bs-placement="top" title="Düzenle" data-bs-target="#anamnesisModal">Düzenle</i>
                                                </a>
                                                <h6 class="m-0 mt-3 text-muted text-center">Temel Bilgiler</h6>
                                                <hr class="horizontal m-2 gray-light" style="background-color:#b4c0d2">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Meslek:</strong> &nbsp; @Anamnesis.Profession</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Boy:</strong> &nbsp; @Anamnesis.Height</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Kilo:</strong> &nbsp; @Anamnesis.Weight</li>
                                                    </div>
                                                </div>
                                                <h6 class="m-0 mt-3 text-muted text-center">Şikayet - Öykü</h6>
                                                <hr class="horizontal m-2 gray-light" style="background-color:#b4c0d2">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Şikayet:</strong> &nbsp; @Anamnesis.Complaint</li>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Öykü:</strong> &nbsp; @Anamnesis.MedicalHistory</li>
                                                    </div>
                                                </div>
                                                <h6 class="m-0 mt-3 text-muted text-center">Kilo Öyküsü</h6>
                                                <hr class="horizontal m-2 gray-light" style="background-color:#b4c0d2">
                                                <div class="row">
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">18 Yaş:</strong> &nbsp; @Anamnesis.WeightHistoryOnTeen</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Eğitim:</strong> &nbsp; @Anamnesis.WeightHistoryOnEducation</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">İş:</strong> &nbsp; @Anamnesis.WeightHistoryOnWork</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Evlilik:</strong> &nbsp; @Anamnesis.WeightHistoryOnMarriage</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Gebelik:</strong> &nbsp; @Anamnesis.WeightHistoryOnPregnancy</li>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Diyet:</strong> &nbsp; @Anamnesis.WeightHistoryOnDiet</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">En Yüksek:</strong> &nbsp; @Anamnesis.WeightHistoryOnTop</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">En Düşük:</strong> &nbsp; @Anamnesis.WeightHistoryOnLow</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Hayal:</strong> &nbsp; @Anamnesis.WeightHistoryOnDream</li>
                                                    </div>
                                                    <div class="col-md">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Hedef:</strong> &nbsp; @Anamnesis.WeightHistoryOnGoal</li>
                                                    </div>
                                                </div>
                                                <h6 class="m-0 mt-3 text-muted text-center">Özgeçmiş</h6>
                                                <hr class="horizontal m-2 gray-light" style="background-color:#b4c0d2">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Adet Düzeni:</strong> &nbsp; @Anamnesis.Period</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Doğum Sayısı:</strong> &nbsp; @Anamnesis.NumberOfBirth</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Düşük Sayısı:</strong> &nbsp; @Anamnesis.NumberOfMiscarry</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Bebek Doğum Ağırlığı:</strong> &nbsp; @Anamnesis.BabyWeightOnBirth</li>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Operasyonlar:</strong> &nbsp; @Anamnesis.MedicalOperations</li>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Medeni Durum:</strong> &nbsp; @Anamnesis.MaritalStatus</li>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Beslenme Durumu:</strong> &nbsp; @Anamnesis.Nutrition</li>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Uyku Durumu:</strong> &nbsp; @Anamnesis.Sleep</li>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Spor Durumu:</strong> &nbsp; @Anamnesis.Sport</li>
                                                    </div>
                                                </div>
                                                <h6 class="m-0 mt-3 text-muted text-center">Alışkanlıklar</h6>
                                                <hr class="horizontal m-2 gray-light" style="background-color:#b4c0d2">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Sigara:</strong> &nbsp; @Anamnesis.Smoking</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Alkol:</strong> &nbsp; @Anamnesis.Alcohol</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Kafein:</strong> &nbsp; @Anamnesis.Caffeine</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Madde:</strong> &nbsp; @Anamnesis.Drugs</li>
                                                    </div>
                                                </div>
                                                <h6 class="m-0 mt-3 text-muted text-center">Soy Geçmiş</h6>
                                                <hr class="horizontal m-2 gray-light" style="background-color:#b4c0d2">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Anne:</strong> &nbsp; @Anamnesis.Mother</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Baba:</strong> &nbsp; @Anamnesis.Father</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Kardeş:</strong> &nbsp; @Anamnesis.Siblings</li>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-muted">Diğer:</strong> &nbsp; @Anamnesis.Other</li>
                                                    </div>
                                                </div>                                              
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingThree">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#three" aria-expanded="false" aria-controls="three">
                                                Fizik Muayene
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="three" class="accordion-collapse collapse p-3" aria-labelledby="headingThree">
                                            <ejs-grid id="GridPhysicalExaminations" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                    <e-data-manager adaptor="UrlAdaptor" url="/PhysicalExamination/Get?pid=@Model.PatientId" insertUrl="/PhysicalExamination/Insert?pid=@Model.PatientId" updateUrl="/PhysicalExamination/Update" removeUrl="/PhysicalExamination/Remove"></e-data-manager>
                                                    <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true"></e-grid-editSettings>
                                                    <e-grid-columns>
                                                        <e-grid-column field="PhysicalExaminationId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                        <e-grid-column field="RecordDate" headerText="Kayıt Tarihi" format='yMd' editType="datepickeredit" width="100px"></e-grid-column>
                                                        <e-grid-column field="BloodPressure" headerText="Tansiyon" width="80px"></e-grid-column>
                                                        <e-grid-column field="Pulse" headerText="Nabız" width="80px"></e-grid-column>
                                                        <e-grid-column field="Description" headerText="Açıklama" width="80px"></e-grid-column>
                                                    </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingFour">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#four" aria-expanded="false" aria-controls="four">
                                                Vücut Analizi
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="four" class="accordion-collapse collapse p-3" aria-labelledby="headingFour">
                                            <ejs-grid id="GridBodyAnalysis" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                    <e-data-manager adaptor="UrlAdaptor" url="/BodyAnalysis/Get?pid=@Model.PatientId" insertUrl="/BodyAnalysis/Insert?pid=@Model.PatientId" updateUrl="/BodyAnalysis/Update" removeUrl="/BodyAnalysis/Remove"></e-data-manager>
                                                    <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true"></e-grid-editSettings>
                                                    <e-grid-columns>
                                                        <e-grid-column field="BodyAnalysisId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                        <e-grid-column field="RecordDate" headerText="Kayıt Tarihi" format='yMd' editType="datepickeredit" width="100px"></e-grid-column>
                                                        <e-grid-column field="Height" headerText="Boy" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                        <e-grid-column field="Weight" headerText="Kilo" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                        <e-grid-column field="Bmi" headerText="BMI" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                        <e-grid-column field="Fat" headerText="Fat%" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                        <e-grid-column field="Fm" headerText="FM" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                        <e-grid-column field="Mm" headerText="MM" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                        <e-grid-column field="Tbw" headerText="TBW" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() })' width="80px"></e-grid-column>
                                                    </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingFive">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#five" aria-expanded="false" aria-controls="five">
                                                Radyoloji
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="five" class="accordion-collapse collapse p-3" aria-labelledby="headingFive">
                                            <ejs-grid id="GridRadiology" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                    <e-data-manager adaptor="UrlAdaptor" url="/Radiology/Get?pid=@Model.PatientId" insertUrl="/Radiology/Insert?pid=@Model.PatientId" updateUrl="/Radiology/Update" removeUrl="/Radiology/Remove"></e-data-manager>
                                                    <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true"></e-grid-editSettings>
                                                    <e-grid-columns>
                                                        <e-grid-column field="RadiologyId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                        <e-grid-column field="RecordDate" headerText="Kayıt Tarihi" format='yMd' editType="datepickeredit" width="100px"></e-grid-column>
                                                        <e-grid-column field="Description" headerText="Açıklama" width="80px"></e-grid-column>
                                                        <e-grid-column field="RadiologyTypeId" headerText="Tür" width="80px" foreignKeyValue="RadiologyTypeName" foreignKeyField="RadiologyTypeId" dataSource="ViewBag.RadiologyTypes"></e-grid-column>
                                                    </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingSix">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#six" aria-expanded="false" aria-controls="six">
                                                Karar - Takip
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="six" class="accordion-collapse collapse p-3" aria-labelledby="headingSix">
                                            <ejs-grid id="GridDecisionAndTracing" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                    <e-data-manager adaptor="UrlAdaptor" url="/DecisionAndTracing/Get?pid=@Model.PatientId" insertUrl="/DecisionAndTracing/Insert?pid=@Model.PatientId" updateUrl="/DecisionAndTracing/Update" removeUrl="/DecisionAndTracing/Remove"></e-data-manager>
                                                    <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true"></e-grid-editSettings>
                                                    <e-grid-columns>
                                                        <e-grid-column field="DecisionAndTracingId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                        <e-grid-column field="RecordDate" headerText="Kayıt Tarihi" format='yMd' editType="datepickeredit" width="100px"></e-grid-column>
                                                        <e-grid-column field="Description" headerText="Açıklama" width="80px"></e-grid-column>
                                                        <e-grid-column field="DecisionAndTracingTypeId" headerText="Tür" foreignKeyValue="DecisionAndTracingTypeName" foreignKeyField="DecisionAndTracingTypeId" dataSource="ViewBag.DecisionAndTracingTypes" width="80px"></e-grid-column>
                                                        <e-grid-column field="UserId" headerText="Kayıt Yapan" foreignKeyValue="FullName" foreignKeyField="UserId" dataSource="ViewBag.Users" width="80px"></e-grid-column>
                                                    </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingSeven">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#seven" aria-expanded="false" aria-controls="seven">
                                                Adülasyon
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="seven" class="accordion-collapse collapse p-3" aria-labelledby="headingSeven">
                                            <ejs-grid id="GridAndulation" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                    <e-data-manager adaptor="UrlAdaptor" url="/Andulation/Get?pid=@Model.PatientId" insertUrl="/Andulation/Insert?pid=@Model.PatientId" updateUrl="/Andulation/Update" removeUrl="/Andulation/Remove"></e-data-manager>
                                                    <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true" mode="Dialog"></e-grid-editSettings>
                                                    <e-grid-columns>
                                                        <e-grid-column field="AndulationId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                        <e-grid-column field="SessionDate" headerText="Tarihi" format='yMd' editType="datepickeredit" width="100px"></e-grid-column>
                                                        <e-grid-column field="Session" headerText="Seans" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() { ValidateDecimalOnType = true, Decimals = 0, Format = "N"}})' width="80px"></e-grid-column>
                                                        <e-grid-column field="Schedule" headerText="Program" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() { ValidateDecimalOnType = true, Decimals = 0, Format = "N"}})' width="80px"></e-grid-column>
                                                        <e-grid-column field="Duration" headerText="Dakika" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() { ValidateDecimalOnType = true, Decimals = 0, Format = "N"}})' width="80px"></e-grid-column>
                                                        <e-grid-column field="Vibration" headerText="Titreşim" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() { ValidateDecimalOnType = true, Decimals = 0, Format = "N"}})' width="80px"></e-grid-column>
                                                        <e-grid-column field="Chest" headerText="Göğüs" editType="numericedit" width="80px"></e-grid-column>
                                                        <e-grid-column field="Waist" headerText="Bel" editType="numericedit" width="80px"></e-grid-column>
                                                        <e-grid-column field="Abdomen" headerText="Karın" editType="numericedit" width="80px"></e-grid-column>
                                                        <e-grid-column field="Hip" headerText="Kalça" editType="numericedit" width="80px"></e-grid-column>
                                                        <e-grid-column field="RightArm" headerText="Sağ Kol" editType="numericedit" width="80px"></e-grid-column>
                                                        <e-grid-column field="RightLeg" headerText="Sağ Bacak" editType="numericedit" width="80px"></e-grid-column>
                                                        <e-grid-column field="Reason" headerText="Nedeni" width="150px"></e-grid-column>
                                                        <e-grid-column field="Description" headerText="Not" width="150px"></e-grid-column>
                                                    </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingEight">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#eight" aria-expanded="false" aria-controls="eight">
                                                Ozon
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="eight" class="accordion-collapse collapse p-3" aria-labelledby="headingEight">
                                            <ejs-grid id="GridOzone" height="250px" width="%100" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                <e-data-manager adaptor="UrlAdaptor" url="/Ozone/Get?pid=@Model.PatientId" insertUrl="/Ozone/Insert?pid=@Model.PatientId" updateUrl="/Ozone/Update" removeUrl="/Ozone/Remove"></e-data-manager>
                                                <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true"></e-grid-editSettings>
                                                <e-grid-columns>
                                                    <e-grid-column field="OzoneId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                    <e-grid-column field="RecordDate" headerText="Uygulama Tarihi" format='yMd' editType="datepickeredit"></e-grid-column>
                                                    <e-grid-column field="Session" headerText="Seans" editType="numericedit" edit='@(new { @params = new Syncfusion.EJ2.Inputs.NumericTextBox() { ValidateDecimalOnType = true, Decimals = 0, Format = "N"}})'></e-grid-column>
                                                    <e-grid-column field="Description" headerText="Açıklama"></e-grid-column>
                                                </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                    <div class="accordion-item mb-3">
                                        <h5 class="accordion-header" id="headingNine">
                                            <button class="accordion-button border-bottom font-weight-bold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#nine" aria-expanded="false" aria-controls="nine">
                                                Laboratuvar
                                                <i class="collapse-close fa fa-plus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                                <i class="collapse-open fa fa-minus text-xs pt-1 position-absolute end-0 me-3" aria-hidden="true"></i>
                                            </button>
                                        </h5>
                                        <div id="nine" class="accordion-collapse collapse p-3" aria-labelledby="headingNine">
                                            <ejs-grid id="GridAnalysis" height="250px" width="%100" actionBegin="actionBegin"
                                                actionComplete="actionComplete" toolbar='@(new List<string>() {"Search", "Add", "Edit", "Delete"})'
                                                allowGrouping="true" allowPaging="true" allowResizing="true" allowTextWrap="true" allowSorting="true" locale="tr">
                                                <e-data-manager adaptor="UrlAdaptor" url="/Analysis/Get?pid=@Model.PatientId" insertUrl="/Analysis/Insert?pid=@Model.PatientId" updateUrl="/Analysis/Update" removeUrl="/Analysis/Remove"></e-data-manager>
                                                <e-grid-editSettings allowAdding="true" allowEditing="true" allowDeleting="true" showDeleteConfirmDialog="true" mode="Dialog"></e-grid-editSettings>
                                                <e-grid-columns>
                                                    <e-grid-column field="AnalysisId" headerText="Id" isPrimaryKey="true" visible="false"></e-grid-column>
                                                    <e-grid-column field="AnalysisDate" headerText="Kayıt Tarihi" format='yMd' editType="datepickeredit"></e-grid-column>
                                                    <e-grid-column field="Description" headerText="Açıklama"></e-grid-column>
                                                    <e-grid-column field="Detay" headerText="Detay" template="#details"></e-grid-column>
                                                </e-grid-columns>
                                            </ejs-grid>
                                        </div>
                                    </div>
                                    <!-- ACCORDION ITEM -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
        </div>
    </div>
</div>
<script id="details" type="text/x-template">
    <a href="/User/Analysis?analysisId=${AnalysisId}">Detay<i class="ni ni-bold-right"></i></a>
</script>

<!-- Anamnesis Modal -->
<div class="modal fade" id="anamnesisModal" tabindex="-1" role="dialog" aria-labelledby="anamnesisModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="anamnesisModalLabel">Anamnez Bilgileri</h5>
                <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <form asp-action="Update" asp-controller="Anamnesis" method="post">
                <input type="hidden" name="PatientId" value="@Model.PatientId">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Profession">Meslek</label>
                                <input type="text" class="form-control" name="Profession" value="@Anamnesis.Profession">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Height">Boy (cm)</label>
                                <input type="number" class="form-control" name="Height" value="@Anamnesis.Height" min="0">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Weight">Kilo (kg)</label>
                                <input type="number" class="form-control" name="Weight" value="@Anamnesis.Weight" min="0">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Complaint">Şikayet</label>
                                <textarea class="form-control" name="Complaint">@Anamnesis.Complaint</textarea>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="MedicalHistory">Öykü</label>
                                <textarea class="form-control" name="MedicalHistory">@Anamnesis.MedicalHistory</textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <h6>Kilo Öyküsü</h6>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnTeen">18 Yaş</label>
                                <input type="number" class="form-control" name="WeightHistoryOnTeen" value="@Anamnesis.WeightHistoryOnTeen" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnEducation">Eğitim</label>
                                <input type="number" class="form-control" name="WeightHistoryOnEducation" value="@Anamnesis.WeightHistoryOnEducation" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnWork">İş</label>
                                <input type="number" class="form-control" name="WeightHistoryOnWork" value="@Anamnesis.WeightHistoryOnWork" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnMarriage">Evlilik</label>
                                <input type="number" class="form-control" name="WeightHistoryOnMarriage" value="@Anamnesis.WeightHistoryOnMarriage" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnPregnancy">Gebelik</label>
                                <input type="number" class="form-control" name="WeightHistoryOnPregnancy" value="@Anamnesis.WeightHistoryOnPregnancy" min="0">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnDiet">Diyet</label>
                                <input type="number" class="form-control" name="WeightHistoryOnDiet" value="@Anamnesis.WeightHistoryOnDiet" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnTop">En Yüksek</label>
                                <input type="number" class="form-control" name="WeightHistoryOnTop" value="@Anamnesis.WeightHistoryOnTop" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnLow">En Düşük</label>
                                <input type="number" class="form-control" name="WeightHistoryOnLow" value="@Anamnesis.WeightHistoryOnLow" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnDream">Hayal</label>
                                <input type="number" class="form-control" name="WeightHistoryOnDream" value="@Anamnesis.WeightHistoryOnDream" min="0">
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-group">
                                <label for="WeightHistoryOnGoal">Hedef</label>
                                <input type="number" class="form-control" name="WeightHistoryOnGoal" value="@Anamnesis.WeightHistoryOnGoal" min="0">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <h6>Özgeçmiş</h6>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Period">Adet Düzeni</label>
                                <input type="text" class="form-control" name="Period" value="@Anamnesis.Period">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="NumberOfBirth">Doğum Sayısı</label>
                                <input type="number" class="form-control" name="NumberOfBirth" value="@Anamnesis.NumberOfBirth">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="NumberOfMiscarry">Düşük Sayısı</label>
                                <input type="number" class="form-control" name="NumberOfMiscarry" value="@Anamnesis.NumberOfMiscarry">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="BabyWeightOnBirth">Bebek Doğum Ağırlığı</label>
                                <input type="number" class="form-control" name="BabyWeightOnBirth" value="@Anamnesis.BabyWeightOnBirth">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="MedicalOperations">Operasyonlar</label>
                                <input type="text" class="form-control" name="MedicalOperations" value="@Anamnesis.MedicalOperations">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="MaritalStatus">Medeni Durum</label>
                                <input type="text" class="form-control" name="MaritalStatus" value="@Anamnesis.MaritalStatus">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nutrition">Beslenme Durumu</label>
                                <input type="text" class="form-control" name="Nutrition" value="@Anamnesis.Nutrition">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Sleep">Uyku Durumu</label>
                                <input type="text" class="form-control" name="Sleep" value="@Anamnesis.Sleep">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Sport">Spor Durumu</label>
                                <input type="text" class="form-control" name="Sport" value="@Anamnesis.Sport">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <h6>Alışkanlıklar</h6>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Smoking">Sigara</label>
                                <input type="text" class="form-control" name="Smoking" value="@Anamnesis.Smoking">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Alcohol">Alkol</label>
                                <input type="text" class="form-control" name="Alcohol" value="@Anamnesis.Alcohol">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Caffeine">Kafein</label>
                                <input type="text" class="form-control" name="Caffeine" value="@Anamnesis.Caffeine">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Drugs">Madde</label>
                                <input type="text" class="form-control" name="Drugs" value="@Anamnesis.Drugs">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <h6>Soy Geçmiş</h6>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Mother">Anne</label>
                                <textarea type="text" class="form-control" name="Mother">@Anamnesis.Mother</textarea>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Father">Baba</label>
                                <textarea type="text" class="form-control" name="Father">@Anamnesis.Father</textarea>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Siblings">Kardeş</label>
                                <textarea type="text" class="form-control" name="Siblings">@Anamnesis.Siblings</textarea>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Other">Diğer</label>
                                <textarea type="text" class="form-control" name="Other">@Anamnesis.Other</textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal">İptal</button>
                    <button type="submit" class="btn bg-gradient-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Localization -->
<script>
    function actionBegin(args) {
        if ((args.requestType === 'beginEdit' || args.requestType === 'add')) {
            var grid = document.getElementById('GridAnalysis').ej2_instances[0];
            for (const cols of grid.columns) {
                if ((cols).field === 'Detay') {
                    (cols).visible = false;
                }
            }
        }
    }
    function actionComplete(args) {
        if (args.requestType === 'save') {
            var grid = document.getElementById('GridAnalysis').ej2_instances[0];
            for (const cols of grid.columns) {
                if ((cols).field === 'Detay') {
                    (cols).visible = true;
                }
            }
            grid.refresh();
        }
    }
    ej.base.L10n.load({
        'tr': {
            'datepicker': {
                'today': 'Bugün'
            },
            "uploader": {
                "invalidFileType": "Hatalı dosya türü seçtiniz.",
                "Browse": "Dosya Seç",
                "Clear": "Temizle",
                "Upload": "Yükle",
                "dropFilesHint": "veya buraya sürükleyin",
                "uploadFailedMessage": "Yükleme başarısız",
                "uploadSuccessMessage": "Başarıyla yüklendi",
                "removedSuccessMessage": "Başarıyla silindi",
                "removedFailedMessage": "Silme başarısız",
                "inProgress": "Yükleniyor",
                "readyToUploadMessage": "Yüklemeye hazır",
                "remove": "Kaldır",
                "cancel": "İptal",
                "delete": "Sil"
            },
            'grid': {
                'EmptyRecord': 'Kayıt yok.',
                'Add': 'Ekle',
                'Edit': 'Düzenle',
                'Update': 'Güncelle',
                'Delete': 'Sil',
                'GroupDropArea': 'Gruplamak için sütunların başlıklarını sürükleyiniz.',
                'Search': 'Arama',
                'EditOperationAlert': 'Düzenlemek için kayıt seçilmedi.',
                'Save': 'Kaydet',
                'EditFormTitle': 'Kayıt Düzenleme - ',
                'ConfirmDelete': 'Kaydı silmek istediğinize emin misiniz?',
                'AddFormTitle': 'Yeni Kayıt',
                'OKButton': 'Tamam',
                'SaveButton': 'Kaydet',
                'CancelButton': 'İptal',
                'Item': 'kayıt',
                'Items': 'kayıt'
            },
            'pager': {
                'currentPageInfo': '{0}/{1}',
                'totalItemsInfo': '({0} kayıt)',
                'firstPageTooltip': 'İlk Sayfa',
                'lastPageTooltip': 'Son Sayfa',
                'nextPageTooltip': 'Sonraki Sayfa',
                'previousPageTooltip': 'Önceki Sayfa',
                'nextPagerTooltip': 'Sonraki Sayfa',
                'previousPagerTooltip': 'Önceki Sayfa'
            }
        }
    });
    loadCultureFiles('tr');
    function loadCultureFiles(name) {
        var files = ['ca-gregorian.json', 'numbers.json', 'timeZoneNames.json', 'dateFields.json'];
        var loader = ej.base.loadCldr;
        var loadCulture = function (prop) {
            var val, ajax;
            ajax = new ej.base.Ajax(location.origin + '/cldr-data/main/' + name + '/' + files[prop], 'GET', false);
            ajax.onSuccess = function (value) { val = value; };
            ajax.send();
            loader(JSON.parse(val));
            ej.base.setCulture('tr');
        };
        for (var prop = 0; prop < files.length; prop++) { loadCulture(prop); }
    }
    datepicker.locale = 'tr';
</script>